<ion-view view-title="Flights">
    <ion-header-bar class="bar-light bar-subheader">
        <input type="text" class="search-box" placeholder="Search flights" data-ng-model="searchFlights"
               ng-change="search()">
        <button ng-if="searchFlights.length"
                class="button button-icon ion-android-close input-button"
                ng-click="clearSearch()">
        </button>
    </ion-header-bar>

    <ion-content>
        <ion-refresher on-refresh="doRefresh()"></ion-refresher>
        <ion-list>
            <ion-item class="item-remove-animate item-avatar item-icon-right" ng-repeat="flight in flights"
                      type="item-text-wrap" href="#/tab/flights/{{flight.id}}">
                <script>console.log("{{flight.airline}}");</script>

                <img class="airline-icon" ng-src="{{flight.icon}}"/>

                <h3>From <b>{{flight.from}}</b></h3>
                <h3>To <b>{{flight.to}}</b></h3>
                <h4>At: <b>{{flight.formattedTime}}</b></h4>
                <h4>Airline: <b>{{flight.airlineName}}</b></h4>

                <i class="icon ion-chevron-right icon-accessory"></i>

                <ion-option-button class="button-balanced" ng-click="track(flight)" ng-if="exists(flight)==false">
                    Track
                </ion-option-button>

                <ion-option-button class="button-assertive" ng-click="track(flight)"
                                   ng-if="exists(flight)==true">
                    Untrack
                </ion-option-button>
            </ion-item>
        </ion-list>
    </ion-content>
</ion-view>